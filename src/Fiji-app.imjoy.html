<docs lang="markdown">
  ## Fiji Model Preview for BioImage.io
  
  This is a BioEngine App for running models on https://bioimage.io
  
  </docs>
  
  <config lang="json">
  {
      "name": "Fiji Model Preview",
      "type": "window",
      "tags": [],
      "ui": "",
      "version": "0.1.0",
      "cover": "",
      "description": "Fiji Model Preview for BioImage.io",
      "icon": "https://raw.githubusercontent.com/bioimage-io/models/master/assets/icons/Fiji-icon.png",
      "inputs": null,
      "outputs": null,
      "api_version": "0.1.7",
      "env": "",
      "permissions": [],
      "requirements": [
          "https://static.imjoy.io/spectre.css/spectre.min.css",
          "https://static.imjoy.io/spectre.css/spectre-exp.min.css",
          "https://static.imjoy.io/spectre.css/spectre-icons.min.css"
      ],
      "dependencies": [],
      "defaults": {"w": 20, "h": 10}
  }
  </config>
  
  <script lang="javascript">
  class ImJoyPlugin {
      async setup() {
          api.log('initialized')
      }
  
      runOneModel(model_info){
        document.getElementById('model_name').innerHTML = model_info.name;
        document.getElementById('model_description').innerHTML = model_info.description;
        document.getElementById('cover').src = model_info.cover_image && model_info.cover_image;
        window.downloadModel = function(){
            window.open(model_info.download_url);
        }
      }
      runManyModels(model_info){
        api.alert('Not implemented')
      }
  
      async run(ctx) {
         
      }
  }
  
  api.export(new ImJoyPlugin())
  </script>
  
  <window lang="html">
      <div>
      <div class="loading loading-lg floating" style="display: none;" id="loading"></div>
      <div class="model-info">
          <div class="card">
              <div class="card-header">
              <h2 id="model_name">Fiji Model</h2>
              <p id="model_description"></p>
              <button class="btn " onclick="downloadModel()">Download for Fiji</button>
              </div>
              <br>
              <div class="card-subtitle">This model requires Fiji, if you don't have it, download from <a href="https://.fiji.sc" target="_blank">here</a></div>
              <div class="card-image" id="result">
                  <img class="img-responsive" id="cover" src=""></img>
              </div>
          </div>
  
      </div>
  </window>
  
  <style lang="css">
  .model-info{
      padding: 10px;
  }
  .card{
      padding: 10px 20px;
  }
  .floating {
      position: absolute !important;
      left: calc( 50% - 2px ) !important;
      top: calc( 30% ) !important;
      z-index: 999;
  }
  </style>
      